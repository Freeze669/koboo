name: ğŸš€ DÃ©ploiement Automatique

on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]

jobs:
  # ğŸ” VÃ©rification du Code
  lint-and-test:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ RÃ©cupÃ©rer le code
        uses: actions/checkout@v4
        
      - name: ğŸ” VÃ©rifier la structure
        run: |
          echo "ğŸ“ VÃ©rification de la structure du projet..."
          ls -la
          echo "âœ… Structure vÃ©rifiÃ©e"
          
      - name: ğŸ” VÃ©rifier les fichiers HTML
        run: |
          echo "ğŸ” VÃ©rification des fichiers HTML..."
          find . -name "*.html" -type f
          echo "âœ… Fichiers HTML trouvÃ©s"
          
      - name: ğŸ” VÃ©rifier les fichiers JavaScript
        run: |
          echo "ğŸ” VÃ©rification des fichiers JavaScript..."
          find . -name "*.js" -type f
          echo "âœ… Fichiers JavaScript trouvÃ©s"
          
      - name: ğŸ” VÃ©rifier les fichiers CSS
        run: |
          echo "ğŸ” VÃ©rification des fichiers CSS..."
          find . -name "*.css" -type f
          echo "âœ… Fichiers CSS trouvÃ©s"

  # ğŸš€ DÃ©ploiement sur GitHub Pages
  deploy:
    needs: lint-and-test
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main' || github.ref == 'refs/heads/master'
    
    steps:
      - name: ğŸ“¥ RÃ©cupÃ©rer le code
        uses: actions/checkout@v4
        
      - name: ğŸš€ DÃ©ployer sur GitHub Pages
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: .
          publish_branch: gh-pages
          cname: ${{ secrets.CNAME }}
          
      - name: âœ… DÃ©ploiement terminÃ©
        run: |
          echo "ğŸ‰ DÃ©ploiement terminÃ© avec succÃ¨s!"
          echo "ğŸŒ Site disponible sur: https://${{ github.repository_owner }}.github.io/${{ github.event.repository.name }}"
